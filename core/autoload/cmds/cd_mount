# -*- mode: sh -*-
cd_mount() {
    local fzf_args=( --height 99% --reverse --no-multi -d ' ' --preview 'preview {2..}' --preview-window=25% )
    [ -z "$*" ] || fzf_args+=( -q "$*" )
    local dest=$(ls-mount |
      if hash column 2>/dev/null; then column -s : -t; else tr ':' ' '; fi |
      FZF_DEFAULT_OPTS="$FZF_SHELL_OPTS" fzf "${fzf_args[@]}" |
      sed 's/^[^[:space:]]*[[:space:]]\+//')

    cd "$dest" || echo "error: failed to cd: $dest" >&2
}


