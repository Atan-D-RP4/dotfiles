;; -*- mode: clojure -*-
(
 (:packages (:yay "polybar"))

 #dot/link-gen
 (:link "$XDG_CONFIG_HOME/polybar/config"
        "$XDG_CONFIG_HOME/polybar/colors"
        {:src "./cmds/*" :dest "$XDG_CONFIG_HOME/polybar/cmds/" :glob true}
        {:src "./bars/*" :dest "$XDG_CONFIG_HOME/polybar/bars/" :glob true}
        {:src "./modules/*" :dest "$XDG_CONFIG_HOME/polybar/modules/" :glob true})

 (:when "! test -e $XDG_CONFIG_HOME/polybar/bars/default"
   (:shell {:desc "Generating default polybar configuration"
            :cmd "sed -e 's bar/example bar/default ' \"$XDG_CONFIG_HOME/polybar/bars/example\" > \"$XDG_CONFIG_HOME/polybar/bars/default\""}))
)
